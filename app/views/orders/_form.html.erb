<% form_url = @order.persisted? ? order_path(@order.order) : orders_path %>
  <%= form_with model: @order, url: form_url, class: "new_order", local: true, data: { turbo: false }  do |f| %>

    <!-- エラーメッセージ -->
    <% if @order.errors.any? %>
      <div class="bg-red-50 border border-red-200 rounded-lg p-4">
        <div class="flex items-center mb-2">
          <h3 class="text-sm font-medium text-red-800">入力内容を確認してください</h3>
        </div>
        <ul class="text-sm text-red-700 space-y-1">
        <% @order.errors.full_messages.each do |message| %>
          <li class="flex items-start">
            <span class="mr-2">•</span>
            <span><%= message %></span>
          </li>
        <% end %>
        </ul>
      </div>
    <% end %>
    
    <!-- 注文ステータス -->
    <div class="flex flex-wrap mt-6 mb-6">
      <div class="flex items-center me-4">
        <%= f.radio_button :ordered, true, id: "ordered_true", checked: true %>
        <%= f.label :ordered, t('orders.new.as_ordered_menu'), for: "ordered_true", class: "ms-2 text-base font-sm font-medium text-gray-900" %>
      </div>
      <div class="flex items-center me-4">
        <%= f.radio_button :ordered, false, id: "ordered_false" %>
        <%= f.label :ordered, t('orders.new.as_interested_menu'), for: "ordered_false", class: "ms-2 text-base font-medium text-gray-900" %>
      </div>
    </div>

    <!-- 店名フィールド -->
    <div class="mb-6">
      <%= f.label :store_name, class: "block text-sm font-semibold text-gray-700 mb-2" do %>
        <span class="flex items-center">
          <%= t('orders.new.store') %>
          <span class="text-red-500 ml-1">*</span>
        </span>
      <% end %>
      <%= f.text_field :store_name, 
          class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-amber-500 focus:ring-2 focus:ring-offset-2 hover:border-gray-400",
          placeholder: "例：スターバックスコーヒー渋谷店" %>
  </div>

    <!-- メニューフィールド -->
    <div class="mb-6">
      <%= f.label :menu_name, class: "block text-sm font-semibold text-gray-700 mb-2" do %>
        <span class="flex items-center">
          <%= t('orders.new.menu') %>
          <span class="text-red-500 ml-1">*</span>
        </span>
      <% end %>
      <%= f.text_field :menu_name, 
          class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-amber-500 focus:ring-2 focus:ring-offset-2 hover:border-gray-400",
          placeholder: "例：ブラックコーヒー" %>
   </div>

    <!-- レビューフィールド -->
    <div class="mb-6">
      <%= f.label :review_rating, t('orders.new.rating'), class: "block text-sm font-semibold text-gray-700 mb-2" do %>
        <span class="flex items-center">
          <%= t('orders.new.rating') %>
      <% end %>

      <%= f.select :review_rating,
          options_for_select([
          ['', ''],        # デフォルト空白
          ['★', 1],
          ['★★', 2],
          ['★★★', 3]
          ], selected: nil),
          {}, # HTML options,
          class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-amber-500 focus:ring-2 focus:ring-offset-2 hover:border-gray-400" %>        
    </div>

    <!-- メモフィールド -->
    <div class="mb-6">
      <%= f.label :memo, class: "block text-sm font-semibold text-gray-700 mb-2" do %>
        <span class="flex items-center">
          <%= t('orders.new.memo') %>
      <% end %>

      <%= f.text_area :memo, 
          placeholder: t('orders.new.memo_limit'),
          class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-amber-500 focus:ring-2 focus:ring-offset-2 hover:border-gray-400" %>
    </div>

    <!-- 画像フィールド -->
    <div class="flex flex-col items-center mb-6 space-y-2" data-controller="image-preview">
      <img data-image-preview-target="preview" src="<%= f.object.menu_image_url_url.present? ? f.object.menu_image_url.url : asset_path('sample.png') %>" alt="プレビュー" class="w-30 h-30 object-cover border border-gray-300 rounded" />
      <label for="menu_image_url" class="inline-block w-30 text-center bg-amber-500 hover:bg-orange-400 text-white text-sm py-2 px-2 rounded-lg cursor-pointer">
      画像を選択する
      </label>
      <%= f.file_field :menu_image_url, id: "menu_image_url", data: { image_preview_target: "input", action: "image-preview#previewImage" }, class: "hidden" %>
    </div>

    <!-- 登録ボタン -->
    <div class="pt-4">
      <%= f.submit t("orders.new.create_button"), 
        class: "w-full flex justify-center items-center px-6 py-3 border border-transparent rounded-lg text-base font-semibold
                text-white bg-amber-500 hover:bg-orange-400 focus:outline-none 
                focus:ring-2 focus:ring-offset-2 focus:ring-amber-500" %>
    </div>
<% end %>